(function(t){function e(e){for(var a,o,s=e[0],l=e[1],c=e[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("b0c0"),n("075a"),n("450d");var a=n("72aa"),r=n.n(a),i=(n("3c52"),n("0d7b")),o=n.n(i),s=(n("fe07"),n("6ac5")),l=n.n(s),c=(n("6611"),n("e772")),u=n.n(c),d=(n("5466"),n("ecdf")),f=n.n(d),p=(n("38a0"),n("ad41")),g=n.n(p),v=(n("1f1a"),n("4e4b")),m=n.n(v),h=(n("e623"),n("e379"),n("5dc8"),n("37e1"),n("e37d")),b=n("2b0e"),_=n("2d7e"),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},k=[],w=document.documentElement.offsetHeight,R={name:"App",created:function(){setInterval((function(){w!==document.documentElement.offsetHeight&&(w=document.documentElement.offsetHeight,window.top.postMessage(JSON.stringify({event:"updateHeight",data:w+"px"}),"*"))}),100)}},O=R,C=(n("5c0b"),n("2877")),x=Object(C["a"])(O,y,k,!1,null,null,null),j=x.exports,D=n("8c4f"),S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Map")},A=[],F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?t._e():n("div",{ref:"mapDiv",staticClass:"map"},[n("SvgPanZoom",{key:t.ratingField+t.selectedFed,staticClass:"map-container",attrs:{zoomEnabled:!1,dblClickZoomEnabled:!1,preventMouseEventsDefault:!1,contain:!0,zoomScaleSensitivity:.1},on:{svgpanzoom:t.registerSvgPanZoom,onZoom:t.clearOver}},[n("svg",{attrs:{width:"100%",xmlns:"http://www.w3.org/2000/svg",viewBox:"-20 0 1234.449 760.6203"}},[t._l(t.coloredRegions,(function(e,a){return n("path",{key:e.title+a,ref:"path",refInFor:!0,class:{hover:e.title===t.overReg,disable:e.disable},style:{fill:e.fill,stroke:e.stroke},attrs:{title:e.title,d:e.d,transform:e.transform,id:"path-"+a},on:{mouseover:function(n){return t.onOver(e,a,n)},mouseout:function(e){return t.onOver(null,a)},mouseleave:function(e){return t.onOver(null,a)},click:function(n){return t.goToRegion(e)}}})})),n("g",t._l(t.showCenters,(function(e,a){return n("g",{key:"text-"+a},[n("circle",{staticClass:"point-circle",class:{hover:e.elem.title===t.overReg},attrs:{stroke:"#535dea",cx:e.x,cy:e.y-4,r:"13"},on:{mouseover:function(n){return t.onOver(e.elem,a,n)},mouseout:function(e){return t.onOver(null,a)},mouseleave:function(e){return t.onOver(null,a)},click:function(n){return t.goToRegion(e.elem)}}}),n("text",{staticClass:"point-text",class:{hover:e.elem.title===t.overReg},attrs:{x:e.x,y:e.y}},[t._v(" "+t._s(e.elem[t.ratingField])+" ")])])})),0)],2)]),n("div",{staticClass:"map-rating",style:{background:"linear-gradient(90deg, "+t.colorArr[0]+" 0%, "+t.colorArr[t.colorArr.length-1]+" 100%)"}},[n("div",{staticClass:"rating-container"},[n("div",{staticClass:"rating-title"},[t._v(t._s(t.ratingField))]),n("div",{staticClass:"rating-start"},[t._v("1")]),n("div",{staticClass:"rating-end"},[t._v(" "+t._s(t.ratingFieldTitle?t.regionDataArr.length:t.maxRating)+" ")])])]),t.showTooltip&&t.selectedRegion?n("div",{key:t.selectedRegion.title,staticClass:"map-info",on:{click:t.clearOver}},[n("h3",{staticClass:"rating-selected-title"},[n("div",{staticClass:"rating-number",style:{backgroundColor:t.selectedRegion[t.ratingField]?void 0:"#d0d0d0",color:t.selectedRegion[t.ratingField]?void 0:"#fefefe"}},[t._v(" "+t._s(t.selectedRegion[t.ratingField]||"-")+" ")]),t._v(" "+t._s(t.selectedRegion.title)+" ")]),n("div",{staticClass:"tooltip-content"},[0===t.ratingType||1===t.ratingType?n("div",{staticClass:"tooltip-items"},[n("div",{staticClass:"tooltip-item"},[t._v(" Задач поставлено "),n("span",{staticClass:"tooltip-item-val"},[t._v(t._s(t.selectedRegion["Задач поставлено"]||"-"))])]),n("div",{staticClass:"tooltip-item"},[t._v(" Задач отобрано "),n("span",{staticClass:"tooltip-item-val"},[t._v(t._s(t.selectedRegion["Задач отобрано"]||"-"))])]),n("div",{staticClass:"tooltip-item"},[t._v(" Задач решено "),n("span",{staticClass:"tooltip-item-val"},[t._v(t._s(t.selectedRegion["Задач решено"]||"-"))])])]):t._e(),0===t.ratingType||2===t.ratingType?n("div",{staticClass:"tooltip-items"},[n("div",{staticClass:"tooltip-item"},[t._v(" Решений внедрено "),n("span",{staticClass:"tooltip-item-val"},[t._v(t._s(t.selectedRegion["Задач внедрено"]||"-"))])]),n("div",{staticClass:"tooltip-item"},[t._v(" Цифровой наставник "),t.selectedRegion["Цифровой наставник"]?n("span",{staticClass:"tooltip-item-val"},[t._v("по "+t._s(t.selectedRegion["Цифровой наставник"])+" "+t._s(t.declOfNum(t.selectedRegion["Цифровой наставник"],["задаче","задачам","задачам"]))+" ")]):n("span",{staticClass:"tooltip-item-val"},[t._v("-")])]),n("div",{staticClass:"tooltip-item"},[t._v(" Разместил цифровую практику на СМАРТЕКЕ "),n("span",{staticClass:"tooltip-item-val"},[t._v(t._s(t.selectedRegion["Разместил цифровую практику на СМАРТЕКЕ"]||"-"))])])]):t._e(),0===t.ratingType||3===t.ratingType?n("div",{staticClass:"tooltip-items"},[n("div",{staticClass:"tooltip-item"},[t._v(" Data-хакатоны "),t.selectedRegion["Data-хакатоны"]?n("span",{staticClass:"tooltip-item-val"},[t._v(t._s(t.selectedRegion["Data-хакатоны"])+" "+t._s(t.declOfNum(t.selectedRegion["Data-хакатоны"],["участник","участника","участников"]))+" ")]):n("span",{staticClass:"tooltip-item-val"},[t._v("-")])]),n("div",{staticClass:"tooltip-item"},[t._v(" Data-debatЫ "),t.selectedRegion["Data-debatЫ"]?n("span",{staticClass:"tooltip-item-val"},[t._v(" "+t._s(t.selectedRegion["Data-debatЫ"])+" "+t._s(t.declOfNum(t.selectedRegion["Data-debatЫ"],["участник","участника","участников"]))+" ")]):n("span",{staticClass:"tooltip-item-val"},[t._v("-")])]),n("div",{staticClass:"tooltip-item"},[t._v(" Количество команд победителей из региона "),t.selectedRegion["Количество команд победителей из региона"]?n("span",{staticClass:"tooltip-item-val"},[t._v(t._s(t.selectedRegion["Количество команд победителей из региона"])+" "+t._s(t.declOfNum(t.selectedRegion["Количество команд победителей из региона"],["команда","команды","команд"]))+" ")]):n("span",{staticClass:"tooltip-item-val"},[t._v("-")])])]):t._e()])]):t._e(),n("el-select",{staticClass:"rating-select",attrs:{placeholder:"Категории рейтинга"},model:{value:t.selectedRating,callback:function(e){t.selectedRating=e},expression:"selectedRating"}},t._l(t.ratingSorts,(function(e){return n("el-option",{key:e.field,attrs:{label:e.title||e.field,value:e.field}},["Общий рейтинг"===e.title?n("strong",[t._v(t._s(e.title))]):n("span",[t._v(t._s(e.title))])])})),1),n("el-select",{staticClass:"fed-select",attrs:{placeholder:"Федеральный округ"},model:{value:t.selectedFed,callback:function(e){t.selectedFed=e},expression:"selectedFed"}},[n("el-option",{attrs:{label:"Все федеральные округа",value:null}}),t._l(t.fedArr,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})}))],2),t.top10Arr.length?n("div",{staticClass:"top-10"},[n("h3",[t._v("ТОП-10")]),t._l(t.top10Arr,(function(e,a){return n("div",{key:e["Субъект РФ"],staticClass:"top-10-item",class:{active:e.title===t.overReg},on:{mouseover:function(n){return t.onOver(e,a,n)},mouseout:function(e){return t.onOver(null,a)},mouseleave:function(e){return t.onOver(null,a)},click:function(n){return t.goToRegion(e)}}},[n("div",{staticClass:"top-10-icon"},[t._v(" "+t._s(a+1)+" ")]),t._v(" "+t._s(e["Субъект РФ"])+" ")])}))],2):t._e(),n("div",{staticClass:"map-controls"},[n("button",{staticClass:"map-zoom-in",attrs:{type:"button",title:"zoom in"},on:{click:t.zoomIn}},[t._v(" + ")]),n("button",{staticClass:"map-zoom-out",attrs:{type:"button",title:"zoom out"},on:{click:t.zoomOut}},[t._v(" - ")])])],1)},T=[],z=(n("4de4"),n("7db0"),n("4160"),n("d81d"),n("13d5"),n("fb6a"),n("b64b"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("3835")),P=n("5530"),E=n("2909"),M=(n("96cf"),n("1da1")),N=n("b9e8"),I=n.n(N),$=n("2c0f"),H=n.n($),L=n("bc3a"),J=n.n(L),G=new I.a,Z={components:{SvgPanZoom:H.a},created:function(){return Object(M["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},data:function(){return{loading:!0,mapDiv$:null,centers:[],colorGradient:G,svgpanzoom:null,regionsObj:{},regions:[],overReg:null,selectedFed:null,tooltipTimer:null,selectedRating:"Место в рейтинге",ratingSort:"asc",ratingField:"Место в рейтинге",ratingFieldTitle:"Общий рейтинг",showTooltip:!1,ratingSorts:[{title:"Общий рейтинг",field:"Место в рейтинге",sort:"asc"},{title:"Рейтинг регионов по задачам",field:"Место по задачам",sort:"asc"},{title:"Ретинг по развитию сообщества",field:"Место по сообществам",sort:"asc"},{title:"Рейтинг по внедрению",field:"Место по внедрениям",sort:"asc"}]}},mounted:function(){var t=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.listenPostMessage(function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(n){var a,r,i,o,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=JSON.parse(n.data),"loadData"!==a.event){e.next=18;break}return console.log("loadData",a.data),e.next=6,t.loadData(a.data);case 6:return r=e.sent,i=r.mapData,o=r.regionsData,o.forEach((function(t){var e=i.find((function(e){return e.title===t["Субъект РФ"]}));e?Object.assign(e,t):console.log(t["Субъект РФ"])})),s=o.reduce((function(t,e){return t[e["Субъект РФ"]]=e,e.title=e["Субъект РФ"],t}),{}),l=i.filter((function(t){return!!s[t.title]})),i.forEach((function(t){Object.assign(t,s[t.title])})),t.regions=l,t.regionsObj=s,e.next=17,t.$nextTick();case 17:t.loading=!1;case 18:e.next=22;break;case 20:e.prev=20,e.t0=e["catch"](0);case 22:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}()),window.top.postMessage(JSON.stringify({event:"loaded"}),"*");case 2:case"end":return e.stop()}}),e)})))()},watch:{selectedRating:function(t){var e=this.ratingSorts.find((function(e){return e.field===t}));this.ratingSort=e.sort,this.ratingField=e.field,this.ratingFieldTitle=e.title}},computed:{ratingType:function(){switch(this.selectedRating){case"Место по задачам":return 1;case"Место по сообществам":return 3;case"Место по внедрениям":return 2;default:return 0}},showCenters:function(){var t=this;return this.centers.filter((function(e){return t.top10[e.elem["Субъект РФ"]]&&!e.elem.hidenum}))},maxRating:function(){var t=this;return this.regions.reduce((function(e,n){return+n[t.ratingField]>e?+n[t.ratingField]:e}),0)},fedArr:function(){return Object(E["a"])(new Set(this.regionDataArr.map((function(t){return t["Фед округ"]}))))},colorArr:function(){return this.colorGradient?(this.colorGradient.setGradient("asc"===this.ratingSort?"#505aea":"#dedede","#a9aee8","asc"===this.ratingSort?"#dedede":"#505aea"),this.colorGradient.setMidpoint(this.maxRating),this.colorGradient.getArray()):[]},selectedRegion:function(){return this.regionsObj[this.overReg]},sortedRegions:function(){var t=this;return Object(E["a"])(this.regions).sort((function(t,e){return t["Субъект РФ"]-e["Субъект РФ"]})).sort((function(e,n){var a=e[t.ratingField]||1/0,r=n[t.ratingField]||1/0;return a-r}))},coloredRegions:function(){var t=this;return this.sortedRegions.map((function(e,n){var a=void 0,r=!1,i=void 0;return a=e[t.ratingField]?t.colorArr[e[t.ratingField]-1]:t.colorArr[t.maxRating],t.selectedFed&&e["Фед округ"]!==t.selectedFed&&(a="#fefefe",i="#dedede",r=!0),t.selectedFed&&(e["Фед округ"],t.selectedFed),t.top10[e["Субъект РФ"]],Object(P["a"])(Object(P["a"])({},e),{},{stroke:i,fill:a,disable:r})}))},regionDataArr:function(){var t=this;return Object.keys(this.regionsObj).map((function(e){return t.regionsObj[e]})).sort((function(e,n){var a=e[t.ratingField]?+e[t.ratingField]:"asc"===t.ratingSort?1/0:0,r=n[t.ratingField]?+n[t.ratingField]:"asc"===t.ratingSort?1/0:0;return"asc"===t.ratingSort?a-r:r-a}))},top10:function(){var t=this;return this.top10Arr.reduce((function(e,n){return e[n["Субъект РФ"]]=n[t.ratingField],e}),{})},top10Arr:function(){var t=this;return this.regionDataArr.slice(0,10).filter((function(e){return!t.selectedFed||e["Фед округ"]===t.selectedFed}))}},methods:{goToRegion:function(t){window.top.postMessage(JSON.stringify({event:"redirect",data:encodeURI(t["Субъект РФ"])}),"*")},listenPostMessage:function(t){window.addEventListener("message",t),this.onDestroy=function(){window.removeEventListener("message",t)}},loadData:function(t){return Object(M["a"])(regeneratorRuntime.mark((function e(){var n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=J.a.get("./data/map.json"),e.next=3,Promise.all([n]);case 3:return a=e.sent,r=Object(z["a"])(a,1),i=r[0],e.abrupt("return",{mapData:i.data,regionsData:t});case 7:case"end":return e.stop()}}),e)})))()},getCenter:function(t){var e=t.x,n=t.y,a=t.width,r=t.height,i={x:e+a/2,y:n+r/2};return i},registerSvgPanZoom:function(t){var e=this;this.svgpanzoom=t,this.svgpanzoom.zoom(.89),this.svgpanzoom.pan({x:15,y:130});var n=this.$refs.path;this.centers=n.map((function(t,n){var a=t.getBBox(),r=Object(P["a"])(Object(P["a"])({},e.getCenter(a)),{},{width:a.width,height:a.height,elem:e.coloredRegions[n]});return r})).sort((function(t,e){return t.y-e.y})),this.mapDiv$=this.$refs.mapDiv},center:function(){this.svgpanzoom&&this.svgpanzoom.center()},zoomIn:function(){this.svgpanzoom.zoomIn()},zoomOut:function(){this.svgpanzoom.zoomOut()},clearOver:function(){this.overReg=null},onClick:function(t){t&&(this.overReg===t.title?this.overReg=null:this.overReg=t.title)},onOver:function(t,e,n){t?(this.overReg=t.title,this.show()):(clearTimeout(this.tooltipTimer),this.showTooltip=!1,this.overReg=null)},show:function(){var t=this;clearTimeout(this.tooltipTimer),this.tooltipTimer=setTimeout((function(){t.showTooltip=!0}),300)},declOfNum:function(t,e){var n=[2,0,1,1,1,2];return e[t%100>4&&t%100<20?2:n[t%10<5?t%10:5]]}}},B=Z,q=(n("894b"),n("e317"),Object(C["a"])(B,F,T,!1,null,"4865da30",null)),U=q.exports,K={name:"App",components:{Map:U}},Q=K,V=Object(C["a"])(Q,S,A,!1,null,null,null),W=V.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"region"},[n("h1",{staticClass:"region_title"},[t._v(" "+t._s(t.regionName)+" "),n("a",{staticClass:"set-button",attrs:{target:"_parent",href:"https://datamasters.ru/create-task",type:"button"}},[t._v(" Поставить задачу на 2021 год ")])]),!t.loading&&t.regionActivity?n("div",{staticClass:"region_content"},[n("h3",{staticClass:"region_subtitle"},[t._v(" Задачи, поставленные регионами ")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.regionActivity.tasks}},[n("el-table-column",{attrs:{prop:"year",label:"Год",width:"180"}}),n("el-table-column",{attrs:{prop:"assigned",label:"Задач поставлено",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.assigned||"-")+" ")]}}],null,!1,419320752)}),n("el-table-column",{attrs:{prop:"selected",label:"Задач отобрано",align:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.selected.length?t._e():n("span",[t._v("-")]),t._l(e.row.selected,(function(e,a){return n("a",{key:a,staticClass:"sol-link",attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.name))])}))]}}],null,!1,1563883712)}),n("el-table-column",{attrs:{prop:"setSolved",label:"Задач решено",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.solved.length?t._e():n("span",[t._v("-")]),t._l(e.row.solved,(function(e,a){return n("a",{key:a,staticClass:"sol-link",attrs:{href:e.link,target:"_blank"}},[t._v("Решение "+t._s(a+1))])}))]}}],null,!1,4162212444)})],1),n("h3",{staticClass:"region_subtitle"},[t._v(" Внедренные цифровые решения ")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.regionActivity.implementation,"empty-text":"Нет элементов для отображения"}},[n("el-table-column",{attrs:{prop:"name",label:"Решений внедрено"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{staticClass:"sol-link",attrs:{href:e.row.link,target:"_blank"}},[t._v(t._s(e.row.rank)+". "+t._s(e.row.name)+" ("+t._s(e.row.year)+")")])]}}],null,!1,2837967979)}),n("el-table-column",{attrs:{prop:"mentor",label:"Цифровой наставник",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.mentor?n("i",{staticClass:"el-icon-success"}):n("span",[t._v("-")])]}}],null,!1,3582120862)}),n("el-table-column",{attrs:{prop:"smartekaLink",label:"Разместил цифровую практику на СМАРТЕКЕ",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.smartekaLink?n("a",{staticClass:"sol-link",attrs:{href:e.row.smartekaLink,target:"_blank"}},[t._v("ссылка")]):n("span",[t._v("-")])]}}],null,!1,1822532348)})],1),n("h3",{staticClass:"region_subtitle"},[t._v(" Развитие дата-сообществ ")]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.regionActivity.community}},[n("el-table-column",{attrs:{prop:"year",label:"Год",width:"180"}}),n("el-table-column",{attrs:{prop:"dataHack",label:"Data-хакатоны",width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.year<2020?[e.row.dataHack?n("i",{staticClass:"el-icon-success"}):t._e()]:t._e(),e.row.year>=2020?[t._v(" "+t._s(e.row.dataHack.length||"-")+" ")]:t._e()]}}],null,!1,734712061)}),n("el-table-column",{attrs:{prop:"dataDebates",label:"Data-дебаты",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.dataDebates.length?n("i",{staticClass:"el-icon-success"}):n("span",[t._v("-")])]}}],null,!1,1296696723)}),n("el-table-column",{attrs:{prop:"teams",label:"Команды победители из региона"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.teams.length?t._e():n("span",[t._v("-")]),t._l(e.row.teams,(function(e,a){return n("a",{key:a,staticClass:"sol-link",attrs:{href:e.link,target:"_blank"}},[t._v(t._s(e.rank?e.rank+".":"")+" "+t._s(e.name))])}))]}}],null,!1,2849455972)})],1),n("br")],1):t._e()])},Y=[],tt=(n("ac1f"),n("9911"),{"Задачи, прошедшие во 2 этап":"selected","Поставленные задачи":"assigned","Решённые задачи":"solved","Команды-победители":"teams","Внедрённые решения":"injected","Ссылка на Data-DebatЫ":"debates","Субъект РФ":"name","Фед округ":"district","Цифровой наставник":"mentor","Решения в СМАРТЕКЕ":"smarteka"}),et={name:"App",props:["regionName"],data:function(){return{loading:!0,regionData:null,activity:null,tabPosition:"projectFeedback",onDestroy:function(){}}},created:function(){var t=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.listenPostMessage(function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=JSON.parse(n.data),"loadData"!==a.event){e.next=6;break}return console.log("loadData",a.data),e.next=6,t.loadData(a.data);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),window.top.postMessage(JSON.stringify({event:"loaded"}),"*"),"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname&&""!==location.hostname){e.next=8;break}return e.t0=t,e.next=6,t.loadActivity();case 6:e.t1=e.sent,e.t0.loadData.call(e.t0,e.t1);case 8:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.onDestroy()},computed:{regionActivity:function(){var t=this,e={},n=new Set,a=Array.isArray(this.activity)?this.activity.find((function(e){return e["Субъект РФ"]===t.regionName})):null;for(var r in a)Object.hasOwnProperty.call(a,r)&&function(){var t,i=a[r],o=/([0-9]{4})\: (.+)/g.exec(r);o?(e[tt[o[2]]]||(e[tt[o[2]]]=[]),(t=e[tt[o[2]]]).push.apply(t,Object(E["a"])((i||[]).map((function(t){return{rank:t["Номер"]?+t["Номер"]:null,name:t["Заголовок"]||null,link:t["Ссылка"]||null,linkId:t["Ссылка-идентификатор"]||null,smartekaLink:null,year:+o[1]||null}})))),n.add(+o[1]||null)):e[tt[r]]=Array.isArray(i)?i.map((function(t){return{rank:t["Номер"]?+t["Номер"]:null,name:t["Заголовок"]||null,link:t["Ссылка"]||null,linkId:t["Ссылка-идентификатор"]||null}})):i}();console.log(e,a);var i=[],o={},s={};Array.isArray(e.smarteka)&&(s=e.smarteka.reduce((function(t,e){return e.linkId?t[e.linkId]=e:console.log("Нет ссылки идентификатора",e),t}),{}),console.log(s)),Array.isArray(e.injected)&&e.injected.forEach((function(t){t.link?(o[t.link]=t,s[t.link]&&(t.smartekaLink=s[t.link].link),i.push(t)):console.error("Отсутствует ссылка:",t)}));var l=Object(E["a"])(n).map((function(t){return{year:t,dataDebates:(e.debates||[]).filter((function(e){return e.year===t})),dataHack:(e.hack||[]).filter((function(e){return e.year===t})),teams:e.teams.filter((function(e){return e.year===t}))}})),c=Object(E["a"])(n).map((function(t){return{year:t,assigned:(e.assigned||[]).filter((function(e){return e.year===t})).length,selected:e.selected.filter((function(e){return e.year===t})),solved:e.solved.filter((function(e){return e.year===t}))}}));return{tasks:c,implementation:i,community:l}}},methods:{listenPostMessage:function(t){window.addEventListener("message",t),this.onDestroy=function(){window.removeEventListener("message",t)}},loadActivity:function(){return Object(M["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J.a.get("./data/activity.json");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})))()},loadRegions:function(){return Object(M["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,J.a.get("./data/regions.json");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})))()},loadData:function(t){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.activity=t,e.loading=!1;case 2:case"end":return n.stop()}}),n)})))()}}},nt=et,at=(n("e6c4"),Object(C["a"])(nt,X,Y,!1,null,"487af956",null)),rt=at.exports;b["default"].use(D["a"]);var it=[{path:"/",name:"Home",component:W},{path:"/region",component:rt,props:function(t){return{regionName:t.query.regionName}}}],ot=new D["a"]({routes:it,scrollBehavior:function(t,e,n){return{x:0,y:0}}}),st=ot;b["default"].use(_["a"]),b["default"].use(h["a"]),b["default"].component(m.a.name,m.a),b["default"].component(g.a.name,g.a),b["default"].component(f.a.name,f.a),b["default"].component(u.a.name,u.a),b["default"].component(l.a.name,l.a),b["default"].component(o.a.name,o.a),b["default"].component(r.a.name,r.a),b["default"].config.productionTip=!1,new b["default"]({router:st,render:function(t){return t(j)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"894b":function(t,e,n){"use strict";n("a8f9")},"9c0c":function(t,e,n){},a8f9:function(t,e,n){},addf:function(t,e,n){},da4c:function(t,e,n){},e317:function(t,e,n){"use strict";n("addf")},e6c4:function(t,e,n){"use strict";n("da4c")}});
//# sourceMappingURL=app.f2746672.js.map